<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/layout :: head(title='NasuKirja - ' + ${user.realname})"> Title </head>
    <body class="small">
        <header th:replace="fragments/layout :: header"> <p> menu </p> </header>
        <p></p>        
        <main th:unless="${FindUserError}">

            <section class="container">
                <div class="row" >
                    <h2 class="col-lg-3 border rounded" style="background-color: AliceBlue">ProfilePicture</h2>
                    <h2 class="col-lg-6" th:text = ${user.realname}>UserName</h2>
                    <section class="col-lg-3 border rounded" th:unless="${IsFriend}" style="background-color: AliceBlue"> 
                        <section th:unless="${IsAskedForFriend}">
                            <form th:unless="${IsMyPage}" th:action="@{'/kayttajat/request/' + ${user.profilename}}"  method="POST">                    
                                <button name="Kaveriksi" type="submit" class="btn btn-primary">Pyydä kaveriksi</button>                                    
                            </form>                        
                        </section>
                    </section>
                </div>
            </section>
            
            <section class="container"> 
                <div class="row">
                    <div class="col-lg-3 border rounded" style="background-color: AliceBlue" >
                        <div th:if="${IsMyPage}" >
                            <h5 th:if="${!FriendRequests.empty}" class=" mt-2 mb-0">Kaveripyynnöt</h5>
                            <div th:each="user : ${FriendRequests}">
                                <a th:href="@{'/kayttajat/' + ${user.askedby.profilename}}" th:text="${user.askedby.realname}">Kaveri</a> </br>
                                <span th:text="${user.asktime}">aika</span>
                                <span th:text="${user.askdate}">päivä</span>
                                <form th:action="@{'/kayttajat/approve/' + ${user.askedby.profilename}}"  method="POST">                
                                    <button type="submit" value ="Submit" name="submit" class="btn btn-success btn-sm mr-1">Hyväksy</button>                                    
                                    <button type="submit" value ="Reject" name="reject" class="btn btn-danger btn-sm mr-1">Hylkää</button>
                                </form>  
                            </div>
                        </div>

                        <h5 class=" mt-2 mb-0">Kaverit</h5>
                        <div th:each="user : ${Friends}">
                            <a th:href="@{'/kayttajat/' + ${user.askedby.profilename}}" th:text="${user.askedby.realname}">Kaveri</a>
                        </div>
                    </div>      
                    
                    <div class="col-lg-6">
                        <h5 class=" mt-2 mb-0">Seinä</h5>
                        <form th:if="${IsMyPage} or ${IsFriend}" th:action="@{'/kayttajat/wall/' + ${user.profilename}}"  method="POST">    
                            <div class="form-group">                          
                                <textarea class="form-control" name="newWallMessage" placeholder="Kirjoita seinälle" rows="3"></textarea>  
                                <button type="submit" value ="Submit" name="sendMessage" class="btn btn-success btn-sm mr-1 mt-2 bg-primary">Lähetä</button>  
                            </div>
                        </form>
                        <div th:each="wall : ${WallMessages}">
                            <p>
                                <a th:href="@{'/kayttajat/' + ${wall.messager.profilename}}"><span th:text="${wall.messager.realname}">kirjailija</span> </a> 
                                <span th:text="${#temporals.format(wall.time, 'dd.MM.yyyy HH:mm')}">aika</span> </br>
                                <span th:text="${wall.message}">Viesti</span> 
                            </p>
                            <p></p>
                        </div>
                    </div>       
                    <div class="col-lg-3 border rounded" style="background-color: AliceBlue">
                        <h5 class=" mt-2 mb-0">Kuvat</h5>
                    </div> 
                </div>
            </section>

        </main>  
        
        <section class="container">
            <p th:if="${FindUserError}" th:text="${FindUserError}" class="text-danger"> Virheviesti</p>
        </section>
    </body>
</html>
